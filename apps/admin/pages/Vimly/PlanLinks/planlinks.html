<html>
    <head>
        <title>Links</title>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.css" /> 
    </head>
    <body>
            <h1>Plan Links</h1>
            <fieldset>
                <legend>Check plans</legend>
                <input type="text" id="planId" placeholder="planId" value="H2E8WB43678232" />
                <input type="text" id="year" placeholder="year" value="2019" />
                <input type="text" id="month" placeholder="month" value="08" />
                <input type="button" value="check" id="checkPlanButton" />
            </fieldset>
            
            <table id="dataTable" class="display" width="100%">
                <thead>
                    <tr>
                        <th>Id</th><th>link</th><th>sub-type</th><th>title</th><th>type</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

            <table id="planIdTable" class="display" width="25%">
                <thead>
                    <tr>
                        <th>Plan Ids</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>                            
                        </td>
                    </tr>
                </tbody>
            </table>

            <script 
                src="https://code.jquery.com/jquery-3.4.1.js"
                integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
                crossorigin="anonymous">
            </script>
            <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.js"></script>
            <script src="./dist/planlinks.js"></script>
            <script>                
                $(document).ready(function(){
                    var dataTable = $("#dataTable").DataTable();
                    $("#checkPlanButton").on("click", () => {
                        var planId = $("#planId").val(),
                            year = $("#year").val(),
                            month = $("#month").val();
                        findADentistLinkManager.getProductInfoLinks(planId, year, month).then(data=> {
                            dataTable.rows().clear();
                            _.each(data.links, function(val, i){
                                dataTable
                                    .row
                                    .add(obj.toArray(val))
                                    .draw();
                            });                                                        
                        })
                    });
                    window.dataTable = dataTable;
                })
            </script>            
    </body>
</html>
